/* @config ../../tailwind.config.js */
@import "tailwindcss";
/* Tailwind v4: drive dark variant by class instead of prefers-color-scheme */
@custom-variant dark (&:where(.dark, .dark *));
@import "highlight.js/styles/github.css";

/* Dark mode code highlighting */
@media (prefers-color-scheme: dark) {
  @import "highlight.js/styles/github-dark.css";
}

/* Custom markdown styles */
.markdown-content {
  @apply text-inherit;
}

.markdown-content h1,
.markdown-content h2,
.markdown-content h3,
.markdown-content h4,
.markdown-content h5,
.markdown-content h6 {
  @apply text-inherit font-semibold mt-4 mb-2 first:mt-0;
}

.markdown-content h1 {
  @apply text-xl;
}
.markdown-content h2 {
  @apply text-lg;
}
.markdown-content h3 {
  @apply text-base;
}

.markdown-content ul,
.markdown-content ol {
  @apply my-2 ml-4;
}

.markdown-content ul {
  @apply list-disc;
}

.markdown-content ol {
  @apply list-decimal;
}

.markdown-content p {
  @apply my-2 first:mt-0 last:mb-0;
}

.markdown-content table th {
  @apply bg-slate-200 dark:bg-gray-500 font-semibold text-left px-3 py-2 border border-gray-300 dark:border-gray-600;
}

.markdown-content table td {
  @apply px-3 py-2 border border-gray-300 dark:border-gray-600;
}

.markdown-content blockquote {
  @apply border-l-4 border-gray-300 dark:border-gray-600 pl-4 py-2 my-4 italic text-gray-700 dark:text-gray-300;
}

.markdown-content code {
  @apply bg-gray-200 dark:bg-gray-600 text-gray-400 px-1.5 py-0.5 rounded text-sm font-mono;
}

.markdown-content pre {
  @apply bg-gray-100 dark:bg-gray-800 rounded-lg p-3 overflow-x-auto my-2;
}

.markdown-content pre code {
  @apply bg-transparent px-0 py-0 text-sm font-mono;
}

.markdown-content a {
  @apply text-emerald-600 hover:text-emerald-700 dark:text-emerald-400 dark:hover:text-emerald-300 underline;
}

.markdown-content li code, p code {
  @apply !text-gray-700 dark:!text-gray-300;
}

:root {
  --background: #f7f7fa;
  --foreground: #171717;
  
  /* Dynamic Viewport Height Variables */
  --vh-fallback: 100vh;
  --vh-small: 100svh;    /* Small viewport height (excludes browser UI) */
  --vh-large: 100lvh;    /* Large viewport height (includes browser UI) */
  --vh-dynamic: 100dvh;  /* Dynamic viewport height (adjusts to browser UI) */
  
  /* Safe Area Insets for devices with notches/dynamic islands */
  --safe-area-inset-top: env(safe-area-inset-top, 0px);
  --safe-area-inset-right: env(safe-area-inset-right, 0px);
  --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
  --safe-area-inset-left: env(safe-area-inset-left, 0px);
  
  /* Mobile-optimized viewport heights */
  --mobile-viewport-height: var(--vh-dynamic);
  --mobile-safe-viewport-height: calc(var(--vh-dynamic) - var(--safe-area-inset-top) - var(--safe-area-inset-bottom));
  
  /* App-specific heights */
  --header-height: 4rem; /* 64px - matches h-16 */
  --footer-height: 3.5rem; /* Approximate footer height on desktop */
  --mobile-content-height: calc(var(--mobile-viewport-height) - var(--header-height));
  --mobile-safe-content-height: calc(var(--mobile-safe-viewport-height) - var(--header-height));
  --desktop-content-height: calc(var(--mobile-viewport-height) - var(--header-height) - var(--footer-height));
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

.dark {
  --background: #0a0a0a;
  --foreground: #ededed;
}

html {
  scroll-behavior: smooth;
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
}

/* Custom scrollbar for webkit browsers */
::-webkit-scrollbar {
  width: 8px;
}

/* Track: explicit colors for light/dark to avoid white bar on dark mode */
::-webkit-scrollbar-track {
  background-color: rgb(243 244 246); /* gray-100 */
}

.dark ::-webkit-scrollbar-track {
  background-color: rgb(31 41 55); /* gray-800 */
}

::-webkit-scrollbar-thumb {
  @apply bg-gray-300 dark:bg-gray-600 rounded-full;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-gray-400 dark:bg-gray-500;
}

/* Corner (for scrollable containers) */
::-webkit-scrollbar-corner {
  background-color: rgb(243 244 246); /* gray-100 */
}

.dark ::-webkit-scrollbar-corner {
  background-color: rgb(31 41 55); /* gray-800 */
}

/* Firefox scrollbar colors */
html {
  scrollbar-width: thin;
  scrollbar-color: rgb(209 213 219) rgb(243 244 246); /* thumb, track */
}

.dark {
  scrollbar-width: thin;
  scrollbar-color: rgb(75 85 99) rgb(31 41 55); /* thumb, track */
}

/* Improved focus styles */
.focus\:ring-2:focus {
  outline: none;
}

/* Better text selection */
::selection {
  @apply bg-emerald-200 text-emerald-900;
}

::-moz-selection {
  @apply bg-emerald-200 text-emerald-900;
}

/* Standardized table control styles */
/* Emerald focus border + ring for inputs used in tables/search */
.input-emerald-focus {
  @apply focus:outline-none focus:ring-2 focus:ring-emerald-300 focus:border-emerald-500 dark:focus:ring-emerald-800 dark:focus:border-emerald-400;
}

/* Emerald accent for checkboxes with accessible focus ring */
.checkbox-emerald {
  accent-color: #059669; /* emerald-600 */
}

.checkbox-emerald:focus-visible {
  outline: none;
  box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.4); /* emerald-500 ring */
}

.dark .checkbox-emerald:focus-visible {
  box-shadow: 0 0 0 2px rgba(5, 150, 105, 0.55); /* emerald-600, stronger on dark */
}

/* Mobile-friendly tap highlights */
input,
button,
textarea,
select,
a {
  -webkit-tap-highlight-color: transparent;
}

/* Smooth transitions for dark mode */
* {
  transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease;
}

/* Unified table row hover/focus styles */
.table-row-hover {
  transition: background-color 150ms ease, border-color 150ms ease;
}

.table-row-hover:hover {
  background-color: #f8fafc; /* slate-50 */
  border-color: rgb(209 213 219); /* gray-300 */
}

.table-row-hover:focus-within {
  background-color: #f3f4f6; /* gray-100 */
  border-color: rgb(209 213 219); /* gray-300 */
}

.dark .table-row-hover:hover {
  background-color: rgba(255, 255, 255, 0.06);
  border-color: rgb(75 85 99); /* gray-600 */
}

.dark .table-row-hover:focus-within {
  background-color: rgba(255, 255, 255, 0.09);
  border-color: rgb(75 85 99); /* gray-600 */
}

/* Responsive Table Styles */
.responsive-table-wrapper {
  @apply w-full my-4;
  /* Mobile phones only: Use constrained width with more precise calculation */
  @media (max-width: 479px) {
    width: calc(100vw - 5.4rem); /* More conservative padding calculation */
    max-width: calc(100vw - 5.4rem);
    margin-left: calc(-0.75rem);
    margin-right: calc(-0.75rem);
  }
}

.responsive-table-container {
  @apply w-full;
  /* Mobile phones only: Enable horizontal scrolling */
  @media (max-width: 479px) {
    @apply overflow-x-auto;
  }
  /* Tablets and desktop: No horizontal scrolling */
  @media (min-width: 480px) {
    overflow-x: visible;
  }
}

.responsive-table {
  @apply border-collapse border border-gray-300 dark:border-gray-600;
  /* Mobile phones only: Enable horizontal scrolling */
  @media (max-width: 479px) {
    @apply whitespace-nowrap min-w-max;
  }
  /* Tablets and desktop: Normal text wrapping */
  @media (min-width: 480px) {
    @apply min-w-full;
    white-space: normal;
  }
}

/* Mobile-specific improvements */
@media (max-width: 640px) {
  /* Ensure no horizontal overflow on mobile */
  body {
    overflow-x: hidden;
  }
  
  /* Better word wrapping for mobile */
  .markdown-content {
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
  }
  
  /* Ensure long URLs and text break properly */
  .markdown-content p,
  .markdown-content li,
  .markdown-content td {
    word-break: break-word;
    overflow-wrap: break-word;
  }
  
  /* Mobile-optimized code blocks */
  .markdown-content pre {
    overflow-x: auto;
    max-width: 100%;
    white-space: pre-wrap;
    word-break: break-all;
  }
  
  /* Mobile-optimized tables */
  .markdown-content table {
    font-size: 0.875rem;
    line-height: 1.25rem;
  }
}

/* Mobile Dynamic Viewport Height Utilities */
.h-mobile-screen {
  height: var(--mobile-viewport-height);
}

.h-mobile-safe-screen {
  height: var(--mobile-safe-viewport-height);
}

.h-mobile-content {
  height: var(--mobile-content-height);
}

.h-mobile-safe-content {
  height: var(--mobile-safe-content-height);
}

.h-desktop-content {
  height: var(--desktop-content-height);
}

.min-h-mobile-screen {
  min-height: var(--mobile-viewport-height);
}

.min-h-mobile-safe-screen {
  min-height: var(--mobile-safe-viewport-height);
}

/* Browser Fallbacks for older browsers that don't support dvh */
@supports not (height: 100dvh) {
  :root {
    --vh-dynamic: 100vh;
    --mobile-viewport-height: 100vh;
    --mobile-safe-viewport-height: 100vh;
    --mobile-content-height: calc(100vh - var(--header-height));
    --mobile-safe-content-height: calc(100vh - var(--header-height));
    --desktop-content-height: calc(100vh - var(--header-height) - var(--footer-height));
  }
}

/* Enhanced mobile viewport support */
@media screen and (max-width: 768px) {
  /* Use small viewport height on mobile for better compatibility */
  :root {
    --mobile-viewport-height: var(--vh-small);
    --mobile-safe-viewport-height: calc(var(--vh-small) - var(--safe-area-inset-top) - var(--safe-area-inset-bottom));
    --mobile-content-height: calc(var(--vh-small) - var(--header-height));
    --mobile-safe-content-height: calc(var(--vh-small) - var(--header-height) - var(--safe-area-inset-top) - var(--safe-area-inset-bottom));
  }
  
  /* Ensure proper padding for safe areas */
  .mobile-safe-area {
    padding-top: var(--safe-area-inset-top);
    padding-right: var(--safe-area-inset-right);
    padding-bottom: var(--safe-area-inset-bottom);
    padding-left: var(--safe-area-inset-left);
  }
  
  /* Mobile-specific height utilities */
  .h-mobile-full {
    height: var(--mobile-content-height);
  }
  
  .h-mobile-safe-full {
    height: var(--mobile-safe-content-height);
  }
}

/* Desktop and larger screens - use dynamic viewport height */
@media screen and (min-width: 769px) {
  :root {
    --mobile-viewport-height: var(--vh-dynamic);
    --mobile-safe-viewport-height: var(--vh-dynamic);
    --mobile-content-height: calc(var(--vh-dynamic) - var(--header-height));
    --mobile-safe-content-height: calc(var(--vh-dynamic) - var(--header-height));
    --desktop-content-height: calc(var(--vh-dynamic) - var(--header-height) - var(--footer-height));
  }
  
  .h-mobile-full {
    height: calc(var(--vh-dynamic) - var(--header-height) - var(--footer-height));
  }
  
  .h-mobile-safe-full {
    height: calc(var(--vh-dynamic) - var(--header-height) - var(--footer-height));
  }
}
